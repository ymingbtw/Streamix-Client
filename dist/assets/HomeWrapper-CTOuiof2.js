import{d as j,r as t,b as v,u as C,j as e,e as y,P as z,a as x,f as S}from"./index-d7UcaRYF.js";import{m as E}from"./proxy-CMgvdZRE.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],A=j("chevron-left",I);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$=j("chevron-right",P);function R(){const[o,u]=t.useState(!0),[a,m]=t.useState({}),[n,c]=t.useState(!1),{token:r}=v(),f=C();return t.useEffect(()=>{async function l(){const i=await x("http://ecnet.website/api/movies/hero",{headers:{Authorization:`Bearer ${r}`},withCredentials:!0});u(!1),i.data.isAuthorized&&m(i.data)}l()},[]),t.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[n]),e.jsxs("div",{className:"relative w-full",children:[n&&e.jsx(y,{id:a.id,setOpenInfo:c}),!o&&a.id&&e.jsxs("div",{className:"flex items-center w-full text-white",children:[e.jsx("img",{src:a.backdrop,className:"w-full aspect-video inset-0",alt:""}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/25 to-transparent"}),e.jsxs("div",{className:"absolute z-10 h-[50%] justify-center max-w-[50%] flex flex-col gap-[clamp(0.2rem,2vw,1rem)] p-[clamp(0.5rem,2vw,1rem)]",children:[e.jsx("p",{className:"text-[clamp(0.25rem,2vw,2rem)] h-50% line-clamp-5 text-ellipsis text-white font-bold w-full",children:a.description}),e.jsxs("div",{className:"flex text-black text-[clamp(0.5rem,3vw,2rem)] gap-1",children:[e.jsxs("button",{onClick:()=>f(`/watch/${a.id}`),className:"flex items-center hover:cursor-pointer font-bold w-fit bg-white px-[clamp(0.5rem,3vw,1rem)] py-[clamp(0.25rem,3vw,0.5rem)] rounded-[clamp(0.25rem,3vw,0.5rem)] hover:bg-white/75 transition duration-300",children:[e.jsx(z,{className:"size-[clamp(0.5rem,3vw,2rem)]",color:"black"}),e.jsx("span",{children:"Play"})]}),e.jsx("button",{onClick:()=>c(!0),className:"px-[clamp(0.5rem,3vw,1rem)] text-white text-[clamp(0.5rem,3vw,2rem)] font-bold py-[clamp(0.25rem,3vw,0.5rem)] hover:cursor-pointer bg-black/75 hover:bg-black/37 z-40 transition duration-300 rounded-[clamp(0.25rem,3vw,0.5rem)] w-fit",children:"Info"})]})]})]})]})}function M({totalPages:o,currentPage:u,onPageChange:a}){return e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:Array.from({length:o}).map((m,n)=>e.jsx("button",{onClick:()=>a(n+1),className:`w-3 hover:cursor-pointer h-3 rounded-full ${n+1===u?"bg-blue-600":"bg-gray-400"}`},n))})}const _=({genre:o,setOpenId:u,setOpenInfo:a})=>{const m=t.useRef(null),[n,c]=t.useState([]),[r,f]=t.useState(1),[l,i]=t.useState(1),[d,b]=t.useState(2),[p,w]=t.useState(0),{token:N}=v(),g=t.useRef(null);function h(s){l<s||s<1||(r<s?w(p+Math.abs(s-r)*-100):r>s&&w(p+Math.abs(s-r)*100),f(s))}return t.useEffect(()=>{o&&x.get(`http://ecnet.website/api/movies?genre=${o}`,{headers:{Authorization:`Bearer ${N}`},withCredentials:!0}).then(s=>{s.data.isAuthorized&&c(s.data.movies)})},[o]),t.useEffect(()=>{n.length%d===0?i(parseInt(n.length/d)):i(parseInt(n.length/d+1))},[d,n]),t.useEffect(()=>{l<r&&l>0&&(f(r-1),h(r-1))},[l,r]),t.useEffect(()=>{const s=new ResizeObserver(([k])=>{k.target.clientWidth>=768?b(3):b(2)});return s.observe(g.current),()=>{s.disconnect()}},[]),e.jsxs("div",{ref:g,className:"relative px-4 overflow-hidden text-[#e5e5e5] select-none",children:[e.jsx("div",{className:"flex justify-between items-center mb-3",children:e.jsx("h2",{className:"text-[clamp(0.5rem,2vw,2rem)] font-bold hover:text-white cursor-pointer",children:o})}),e.jsx("button",{onClick:()=>h(r-1),className:"absolute hover:cursor-pointer left-0 top-1/2 -translate-y-[25%] z-10 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full",children:e.jsx(A,{size:24})}),e.jsx("div",{ref:m,className:"flex gap-2 transition-transform ease-in-out duration-700",style:{transform:`translateX(${p}%)`},children:n.map(s=>e.jsx("div",{onClick:()=>{u(s.id),a(!0)},className:" grow-0 hover:cursor-pointer shrink-0 basis-[calc(1/2*100%-0.5rem)] translate-x-[0.25rem] min-[768px]:basis-[calc(1/3*100%-0.5rem)]",children:e.jsx("img",{src:s.backdrop,alt:s.title,className:"aspect-video w-full rounded-lg object-cover cursor-pointer"})},s.id))}),e.jsx("button",{onClick:()=>h(r+1),className:"absolute hover:cursor-pointer right-0 top-1/2 -translate-y-[25%] z-10 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full",children:e.jsx($,{size:24})}),e.jsx(M,{totalPages:l,currentPage:r,onPageChange:h})]})};function L(){const[o,u]=t.useState(!0),{token:a}=v(),[m,n]=t.useState([]),[c,r]=t.useState(!1),[f,l]=t.useState(null);return console.log("home rendered"),t.useEffect(()=>{async function i(){const d=await x("http://ecnet.website/api/genres/top",{headers:{Authorization:`Bearer ${a}`},withCredentials:!0});u(!1),d.data.isAuthorized&&n(d.data)}i()},[]),t.useEffect(()=>(c?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[c]),e.jsxs(E.div,{initial:{opacity:1},exit:{opacity:0,transition:{duration:1.2}},className:"bg-[#141414] relative min-h-screen select-none",children:[e.jsx(R,{}),e.jsx("div",{className:"-translate-y-[clamp(2rem,2vw,4rem)]",children:o?e.jsx("div",{children:"Loading..."}):m.map(i=>e.jsx(_,{setOpenId:l,setOpenInfo:r,genre:i.genre},i.genre_id))}),c&&e.jsx(y,{id:f,setOpenInfo:r})]})}function B(){return e.jsx(S.KeepAlive,{children:e.jsx(L,{})})}export{B as default};
