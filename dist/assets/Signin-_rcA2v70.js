import{b as f,u as h,r as i,j as e,F as p,a as b}from"./index-d7UcaRYF.js";import{a as x,b as v}from"./validation-BNH8MvxE.js";function w(r,t){switch(t.type){case"email":return{...r,email:t.payload};case"password":return{...r,password:t.payload};default:return r}}async function g(r,t,o){const n=await b.post("http://ecnet.website/api/signin",{email:r,password:t},{headers:{"Content-Type":"application/json"},withCredentials:!0});return o(),n}function y(){const{setIsAuthenticated:r,setToken:t}=f(),o=h(),[n,u]=i.useState(!1),[d,m]=i.useState(!1),[s,c]=i.useReducer(w,{email:{value:"",valid:!1,error:null},password:{value:"",valid:!1,error:null}});return i.useEffect(()=>{const a=s.email.valid&&s.password.valid;d!==a&&m(!!a)},[s]),console.log("sign in rendered"),e.jsx("div",{className:"min-h-screen bg-black",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute min-h-screen inset-0 overflow-hidden",children:e.jsx("img",{src:"http://ecnet.website/images/login_background.webp",alt:"Background",className:"w-full h-full object-cover object-center"})}),e.jsx("div",{className:"absolute min-h-screen inset-0 bg-black/60 z-10"}),e.jsx("div",{className:"relative items-center justify-between z-20 flex",children:e.jsx(p,{hover:!0})}),e.jsx("div",{className:"px-8",children:e.jsxs("form",{className:"bg-white/5 relative z-20 backdrop-blur-md p-8 rounded-xl shadow-xl max-w-md w-full mx-auto mt-10 space-y-6 text-left",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Email Address"}),e.jsx("input",{defaultValue:s.email.value,onBlur:a=>{x(a.currentTarget.value,c)},type:"email",placeholder:"you@domain.com",className:"w-full focus:border-white transition-colors hover:border-white duration-300 p-3 rounded-md bg-black/40 text-white placeholder-gray-400 border border-white/10 focus:outline-none ring-0]"}),!s.email.valid&&e.jsx("span",{className:"text-red-500 p-1",children:s.email.error})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Password"}),e.jsx("input",{onBlur:a=>{v(a.currentTarget.value,c)},defaultValue:s.password.value,type:"password",placeholder:"••••••••",className:"w-full transition-colors focus:border-white hover:border-white duration-300 p-3 rounded-md bg-black/40 text-white placeholder-gray-400 border border-white/10 focus:outline-none ring-0]"}),!s.password.valid&&e.jsx("span",{className:"text-red-500",children:s.password.error})]}),e.jsx("button",{onClick:async a=>{a.preventDefault(),u(!0);const l=await g(s.email.value,s.password.value,()=>{u(!1)});if(console.log(l.data),!l.data.success){c({type:l.data.type,payload:l.data.payload});return}r(!0),t(l.data.token),o("/")},disabled:!d,type:"submit",className:`w-full ${d?"bg-[var(--color-primary-start)] hover:bg-[var(--color-button-hover)] transition duration-300":"hover:cursor-not-allowed bg-red-900"} text-white py-3 px-6 rounded-lg font-bold select-none`,children:n?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"w-6 h-6 border-4 border-white border-t-transparent rounded-full animate-spin"})}):"Sign In"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"text-[#ffffffb3] select-none",children:"New to Streamix?"}),e.jsx("div",{onClick:()=>o("/register"),className:"text-white hover:cursor-pointer font-bold",children:"Register now."})]})]})})]})})}export{y as default};
